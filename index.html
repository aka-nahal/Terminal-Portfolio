<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lone Detective Portfolio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <link rel="stylesheet" href="style.css">
  
</head>
<body>
  <!-- Unix-style preloader with ID for session storage check -->
  <div class="preloader" id="preloader">
    <div class="preloader-content">
      <div class="preloader-line">LONE_DETECTIVE@SYSTEM:~$ ./initialize_portfolio.sh</div>
      <div class="preloader-line">Initializing system components...</div>
      <div class="preloader-line">Loading kernel modules: [OK]</div>
      <div class="preloader-line">Mounting file systems: [OK]</div>
      <div class="preloader-line">Checking hardware compatibility: [OK]</div>
      <div class="preloader-line">Establishing secure connection: [OK]</div>
      <div class="preloader-line">Loading visual interface...</div>
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
      <div class="preloader-line" id="loading-status">Loading: 0%</div>
    </div>
  </div>

  <div id="app">
    <header>
      <div class="logo">
        <div class="logo-text">
          <span class="logo-text-main">LONE DETECTIVE</span>
          <span class="logo-text-sub">ARCH OPERATING SYSTEM</span>
        </div>
      </div>
      <div class="time" id="time">00:00:00</div>
    </header>
    
    <main>
      <div id="sphere-container"></div>
      
      <!-- Target cross overlay with class for styling -->
      <div class="target-cross">
        <div class="cross-container">
          <div class="cross-horizontal"></div>
          <div class="cross-vertical"></div>
          <div class="cross-circle outer"></div>
          <div class="cross-circle middle"></div>
          <div class="cross-circle inner"></div>
          <div class="cross-center"></div>
        </div>
      </div>
      
      <!-- Terminal overlay -->
      <div class="terminal-overlay">
        <div class="terminal">
          <div class="terminal-content" id="terminal-output"></div>
        </div>
        <div class="command-line">
          <div class="command-prompt">L.D.A.O.S:~$</div>
          <input type="text" class="command-input" id="command-input" placeholder="Type a command..." autofocus>
        </div>
      </div>
      
      <!-- Grid lines -->
      <div class="grid-lines">
        <!-- Generated by JS -->
      </div>
      
      <!-- Hebrew characters -->
      <div class="hebrew-chars">
        <!-- Generated by JS -->
      </div>
    </main>
    
    <aside>
      <div class="data-panel">
        <div class="side-panel-content">
          <div class="data-sections">
            <div class="data-section" id="about">
              <h3>PROFILE ANALYSIS</h3>
              <div class="status-bar">
                <div class="status-fill"></div>
              </div>
              <div class="data-grid">
                <div class="data-item">
                  <span class="data-label">NAME:</span>
                  <span class="data-value">LONE DETECTIVE</span>
                </div>
                <div class="data-item">
                  <span class="data-label">ROLE:</span>
                  <span class="data-value">CO-FOUNDER & DEVELOPER</span>
                </div>
                <div class="data-item">
                  <span class="data-label">LOCATION:</span>
                  <span class="data-value">CYBERSPACE</span>
                </div>
                <div class="data-item">
                  <span class="data-label">STATUS:</span>
                  <span class="data-value">AVAILABLE</span>
                </div>
              </div>
              <p style="color: #CCCCCC; font-size: 0.9rem; line-height: 1.5; margin-top: 10px; margin-bottom: 0;">
                Mechatronics Engineering student & co-founder of Futureforge Studios Pvt. Ltd. Passionate about merging ideas, collaboration, and cross-disciplinary learning. Strong foundation in engineering, statistics, and machine learning. 
                   Experienced in web development & server management.
              </p>
            </div>
            
            <div class="data-section" id="skills">
              <h3>SKILL CONFIGURATION</h3>
              <div class="hexagon-grid">
                <div class="hexagon active"></div>
                <div class="hexagon"></div>
                <div class="hexagon active"></div>
                <div class="hexagon"></div>
                <div class="hexagon active"></div>
              </div>
              <div class="data-grid">
                <div class="data-item">
                  <span class="data-label">LANGUAGES:</span>
                  <span class="data-value">C, PYTHON, HTML, CSS, JS</span>
                </div>
                <div class="data-item">
                  <span class="data-label">FRAMEWORKS:</span>
                  <span class="data-value">REACT, VUE</span>
                </div>
                <div class="data-item">
                  <span class="data-label">BACKEND:</span>
                  <span class="data-value">NODE, DJANGO</span>
                </div>
                <div class="data-item">
                  <span class="data-label">ADMINISTRATION:</span>
                  <span class="data-value">LINUX, WINDOWS & MAC</span>
                </div>
                <div class="data-item">
                  <span class="data-label">CLOUD:</span>
                  <span class="data-value">AWS, AZURE, DIGITAL OCEAN</span>
                </div>
                <div class="data-item">
                  <span class="data-label">DEVOPS:</span>
                  <span class="data-value">DOCKER, K8S, CI/CD</span>
                </div>
              </div>
            </div>
            
            <div class="data-section" id="contact">
              <h3>COMMUNICATION CHANNELS</h3>
              <div class="data-grid">
                <div class="data-item">
                  <span class="data-label">EMAIL:</span>
                  <span class="data-value">
                    <a href="mailto:me@lonedetective.moe" class="social-link">ME@LONEDETECTIVE.MOE</a>
                  </span>
                </div>
                <div class="data-item">
                  <span class="data-label">GITHUB:</span>
                  <span class="data-value">
                    <a href="https://github.com/aka-nahal" target="_blank" class="social-link">@AKA-NAHAL</a>
                  </span>
                </div>
                <div class="data-item">
                  <span class="data-label">TWITTER:</span>
                  <span class="data-value">
                    <a href="https://twitter.com/detective_lone" target="_blank" class="social-link">@DETECTIVE_LONE</a>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <!-- Add world map overlay -->
  <div class="world-map-container" id="world-map-container">
    <div class="world-map">
      <svg width="100%" height="100%" viewBox="0 0 1000 500" id="world-map-svg">
        <!-- World map SVG path will be added via JavaScript -->
      </svg>
      <div class="map-info" id="map-info">
        Click on a location to view details
      </div>
      <button class="close-map" id="close-map">CLOSE [X]</button>
    </div>
  </div>

  <!-- Add particles to main area -->
  <div class="particles" id="particles"></div>

  <!-- Add system monitor below communications channel -->
  <div class="system-monitor">
    <div class="monitor-header">
      <div class="monitor-title">SYSTEM MONITOR</div>
      <div class="monitor-stats">PROCESSES: <span id="process-count">12</span> | UPTIME: <span id="uptime">00:00:00</span></div>
    </div>
    
    <div class="resource-bars">
      <div class="resource-bar">
        <div class="resource-label">
          <span class="resource-name">CPU</span>
          <span class="resource-value" id="cpu-value">32%</span>
        </div>
        <div class="bar-container">
          <div class="bar-fill cpu" id="cpu-bar" style="width: 32%"></div>
        </div>
      </div>
      
      <div class="resource-bar">
        <div class="resource-label">
          <span class="resource-name">MEMORY</span>
          <span class="resource-value" id="mem-value">45%</span>
        </div>
        <div class="bar-container">
          <div class="bar-fill mem" id="mem-bar" style="width: 45%"></div>
        </div>
      </div>
      
      <div class="resource-bar">
        <div class="resource-label">
          <span class="resource-name">DISK</span>
          <span class="resource-value" id="disk-value">67%</span>
        </div>
        <div class="bar-container">
          <div class="bar-fill disk" id="disk-bar" style="width: 67%"></div>
        </div>
      </div>
      
      <div class="resource-bar">
        <div class="resource-label">
          <span class="resource-name">NETWORK</span>
          <span class="resource-value" id="net-value">28%</span>
        </div>
        <div class="bar-container">
          <div class="bar-fill net" id="net-bar" style="width: 28%"></div>
        </div>
      </div>
    </div>
    
    <div class="process-list" id="process-list">
      <div class="process-item">
        <div class="process-name">ldaos-kernel</div>
        <div class="process-cpu">2.4%</div>
        <div class="process-mem">128MB</div>
        <div class="process-status">RUN</div>
      </div>
      <div class="process-item">
        <div class="process-name">security-daemon</div>
        <div class="process-cpu">12.1%</div>
        <div class="process-mem">256MB</div>
        <div class="process-status">RUN</div>
      </div>
      <div class="process-item">
        <div class="process-name">network-monitor</div>
        <div class="process-cpu">5.7%</div>
        <div class="process-mem">192MB</div>
        <div class="process-status">RUN</div>
      </div>
      <div class="process-item">
        <div class="process-name">crypto-engine</div>
        <div class="process-cpu">8.3%</div>
        <div class="process-mem">384MB</div>
        <div class="process-status">RUN</div>
      </div>
      <div class="process-item">
        <div class="process-name">ld-term</div>
        <div class="process-cpu">1.2%</div>
        <div class="process-mem">64MB</div>
        <div class="process-status">RUN</div>
      </div>
    </div>
  </div>

  <!-- Add this HTML for mobile menu -->
  <div class="mobile-nav">
    <div class="mobile-nav-items">
      <div class="mobile-nav-item">Home</div>
      <div class="mobile-nav-item">Terminal</div>
      <div class="mobile-nav-item">Games</div>
      <div class="mobile-nav-item">Settings</div>
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    // Enhanced radar functionality
    document.addEventListener('DOMContentLoaded', function() {
      const crossContainer = document.querySelector('.cross-container');
      if (!crossContainer) return;
      
      // Add scan line
      const scanLine = document.createElement('div');
      scanLine.className = 'scan-line';
      crossContainer.appendChild(scanLine);
      
      // Add radar coordinates
      for (let i = 0; i < 4; i++) {
        const angle = i * Math.PI / 2;
        const coord = document.createElement('div');
        coord.className = 'radar-coordinates';
        
        const containerSize = crossContainer.offsetWidth;
        const radius = containerSize * 0.45;
        const x = Math.cos(angle) * radius + containerSize / 2;
        const y = Math.sin(angle) * radius + containerSize / 2;
        
        coord.style.left = `${x}px`;
        coord.style.top = `${y}px`;
        
        const labels = ['N', 'E', 'S', 'W'];
        coord.textContent = labels[i];
        
        crossContainer.appendChild(coord);
      }
      
      // Add random radar blips
      function addRandomBlips() {
        // Clear existing blips
        const existingBlips = crossContainer.querySelectorAll('.radar-blip');
        existingBlips.forEach(blip => blip.remove());
        
        // Add new blips
        const blipCount = Math.floor(Math.random() * 5) + 3; // 3-7 blips
        
        for (let i = 0; i < blipCount; i++) {
          const blip = document.createElement('div');
          blip.className = 'radar-blip';
          
          // Random position within the container
          const angle = Math.random() * Math.PI * 2;
          const distance = Math.random() * 0.8; // Keep within 80% of radius
          
          const containerSize = crossContainer.offsetWidth;
          const centerX = containerSize / 2;
          const centerY = containerSize / 2;
          
          const x = centerX + Math.cos(angle) * distance * centerX;
          const y = centerY + Math.sin(angle) * distance * centerY;
          
          blip.style.left = `${x}px`;
          blip.style.top = `${y}px`;
          
          // Random animation delay
          blip.style.animationDelay = `${Math.random() * 2}s`;
          
          // Occasionally add a critical blip
          if (Math.random() < 0.2) {
            blip.classList.add('critical');
          }
          
          crossContainer.appendChild(blip);
        }
        
        // Schedule next blips
        setTimeout(addRandomBlips, 3000 + Math.random() * 2000);
      }
      
      // Start adding blips
      addRandomBlips();
      
      // Create world map dialog
      const mapDialog = document.createElement('div');
      mapDialog.className = 'world-map-dialog';
      mapDialog.innerHTML = `
        <div class="map-header">
          <div class="map-title">GLOBAL SURVEILLANCE NETWORK</div>
          <button class="map-close">&times;</button>
        </div>
        <div class="map-content">
          <svg class="world-map-svg" viewBox="0 0 1000 500" preserveAspectRatio="xMidYMid meet">
            <!-- World map will be loaded here -->
          </svg>
          <div class="map-info-panel">
            <div class="map-info-title">LOCATION DATA</div>
            <div class="map-info-data">
              <span class="map-info-label">REGION:</span>
              <span class="map-info-value">--</span>
            </div>
            <div class="map-info-data">
              <span class="map-info-label">STATUS:</span>
              <span class="map-info-value">--</span>
            </div>
            <div class="map-info-data">
              <span class="map-info-label">ACTIVITY:</span>
              <span class="map-info-value">--</span>
            </div>
            <div class="map-info-data">
              <span class="map-info-label">THREAT LEVEL:</span>
              <span class="map-info-value">--</span>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(mapDialog);
      
      // Create overlay
      const mapOverlay = document.createElement('div');
      mapOverlay.className = 'map-overlay';
      document.body.appendChild(mapOverlay);
      
      // Load simplified world map SVG
      const worldMapSvg = mapDialog.querySelector('.world-map-svg');
      const worldMapData = {
        continents: [
          { id: 'na', name: 'North America', path: 'M 170,120 L 300,120 L 330,180 L 280,250 L 200,280 L 150,200 Z', status: 'SECURE', activity: 'NORMAL', threat: 'LOW' },
          { id: 'sa', name: 'South America', path: 'M 220,280 L 280,280 L 300,380 L 250,450 L 200,400 L 180,320 Z', status: 'MONITORING', activity: 'SUSPICIOUS', threat: 'MEDIUM' },
          { id: 'eu', name: 'Europe', path: 'M 450,120 L 520,100 L 550,150 L 520,200 L 450,180 Z', status: 'ALERT', activity: 'UNUSUAL', threat: 'HIGH' },
          { id: 'af', name: 'Africa', path: 'M 450,200 L 520,200 L 550,350 L 480,400 L 420,350 L 420,250 Z', status: 'SECURE', activity: 'NORMAL', threat: 'LOW' },
          { id: 'as', name: 'Asia', path: 'M 550,100 L 750,100 L 800,200 L 750,300 L 650,350 L 550,300 L 550,200 Z', status: 'MONITORING', activity: 'SUSPICIOUS', threat: 'MEDIUM' },
          { id: 'au', name: 'Australia', path: 'M 750,320 L 850,320 L 850,400 L 780,420 L 730,380 Z', status: 'SECURE', activity: 'NORMAL', threat: 'LOW' }
        ],
        points: [
          { x: 250, y: 150, name: 'New York', status: 'SECURE', activity: 'NORMAL', threat: 'LOW' },
          { x: 470, y: 140, name: 'London', status: 'ALERT', activity: 'UNUSUAL', threat: 'HIGH' },
          { x: 650, y: 200, name: 'Tokyo', status: 'MONITORING', activity: 'SUSPICIOUS', threat: 'MEDIUM' },
          { x: 550, y: 250, name: 'Cairo', status: 'SECURE', activity: 'NORMAL', threat: 'LOW' },
          { x: 250, y: 350, name: 'Rio de Janeiro', status: 'MONITORING', activity: 'SUSPICIOUS', threat: 'MEDIUM' },
          { x: 780, y: 350, name: 'Sydney', status: 'SECURE', activity: 'NORMAL', threat: 'LOW' }
        ]
      };
      
      // Add continents to the map
      worldMapData.continents.forEach(continent => {
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('d', continent.path);
        path.setAttribute('class', 'map-location');
        path.setAttribute('id', continent.id);
        path.setAttribute('data-name', continent.name);
        path.setAttribute('data-status', continent.status);
        path.setAttribute('data-activity', continent.activity);
        path.setAttribute('data-threat', continent.threat);
        worldMapSvg.appendChild(path);
        
        // Add click event
        path.addEventListener('click', function() {
          // Remove active class from all locations
          document.querySelectorAll('.map-location').forEach(loc => loc.classList.remove('active'));
          // Add active class to clicked location
          this.classList.add('active');
          
          // Update info panel
          const infoPanel = mapDialog.querySelector('.map-info-panel');
          infoPanel.querySelector('.map-info-title').textContent = this.getAttribute('data-name');
          infoPanel.querySelectorAll('.map-info-data')[0].querySelector('.map-info-value').textContent = this.getAttribute('data-name');
          infoPanel.querySelectorAll('.map-info-data')[1].querySelector('.map-info-value').textContent = this.getAttribute('data-status');
          infoPanel.querySelectorAll('.map-info-data')[2].querySelector('.map-info-value').textContent = this.getAttribute('data-activity');
          infoPanel.querySelectorAll('.map-info-data')[3].querySelector('.map-info-value').textContent = this.getAttribute('data-threat');
          
          // Show info panel
          infoPanel.classList.add('active');
        });
      });
      
      // Add points to the map
      worldMapData.points.forEach(point => {
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('cx', point.x);
        circle.setAttribute('cy', point.y);
        circle.setAttribute('r', 3);
        circle.setAttribute('class', 'map-point');
        circle.setAttribute('data-name', point.name);
        circle.setAttribute('data-status', point.status);
        circle.setAttribute('data-activity', point.activity);
        circle.setAttribute('data-threat', point.threat);
        worldMapSvg.appendChild(circle);
        
        // Add click event
        circle.addEventListener('click', function() {
          // Remove active class from all points
          document.querySelectorAll('.map-point').forEach(pt => pt.classList.remove('active'));
          // Add active class to clicked point
          this.classList.add('active');
          
          // Update info panel
          const infoPanel = mapDialog.querySelector('.map-info-panel');
          infoPanel.querySelector('.map-info-title').textContent = this.getAttribute('data-name');
          infoPanel.querySelectorAll('.map-info-data')[0].querySelector('.map-info-value').textContent = this.getAttribute('data-name');
          infoPanel.querySelectorAll('.map-info-data')[1].querySelector('.map-info-value').textContent = this.getAttribute('data-status');
          infoPanel.querySelectorAll('.map-info-data')[2].querySelector('.map-info-value').textContent = this.getAttribute('data-activity');
          infoPanel.querySelectorAll('.map-info-data')[3].querySelector('.map-info-value').textContent = this.getAttribute('data-threat');
          
          // Show info panel
          infoPanel.classList.add('active');
        });
      });
      
      // Open map dialog when clicking on radar
      crossContainer.addEventListener('click', function() {
        mapDialog.classList.add('active');
        mapOverlay.classList.add('active');
      });
      
      // Close map dialog
      const closeButton = mapDialog.querySelector('.map-close');
      closeButton.addEventListener('click', function() {
        mapDialog.classList.remove('active');
        mapOverlay.classList.remove('active');
      });
      
      // Close map when clicking overlay
      mapOverlay.addEventListener('click', function() {
        mapDialog.classList.remove('active');
        mapOverlay.classList.remove('active');
      });
    });

    // Add incognito logo to the site
    document.addEventListener('DOMContentLoaded', function() {
      // Create the logo SVG element
      const logoContainer = document.querySelector('.logo');
      if (!logoContainer) return;
      
      // Clear existing content
      logoContainer.innerHTML = '';
      
      // Create SVG element
      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      svg.setAttribute('width', '40');
      svg.setAttribute('height', '40');
      svg.setAttribute('viewBox', '0 0 24 24');
      svg.setAttribute('class', 'incognito-logo');
      
      // Create hat part
      const hat = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      hat.setAttribute('d', 'M12,2C9.3,2,7.1,3.8,6.3,6.3C6.1,6.9,5.9,7.5,5.7,8.1C5.5,8.7,5.2,9.3,4.9,9.9C4.6,10.4,4.3,11,4,11.5C3.7,12,3.5,12.5,3.2,13C3,13.5,2.7,14,2.5,14.5C2.2,15,2,15.5,1.8,16C1.5,16.5,1.3,17,1.1,17.5C1,18,0.8,18.5,0.7,19C0.5,19.5,0.4,20,0.3,20.5C0.2,21,0.1,21.5,0.1,22H23.9C23.9,21.5,23.8,21,23.7,20.5C23.6,20,23.5,19.5,23.3,19C23.2,18.5,23,18,22.9,17.5C22.7,17,22.5,16.5,22.2,16C22,15.5,21.8,15,21.5,14.5C21.3,14,21,13.5,20.8,13C20.5,12.5,20.3,12,20,11.5C19.7,11,19.4,10.4,19.1,9.9C18.8,9.3,18.5,8.7,18.3,8.1C18.1,7.5,17.9,6.9,17.7,6.3C16.9,3.8,14.7,2,12,2Z');
      hat.setAttribute('fill', '#00FF00');
      
      // Create glasses part
      const glasses = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      glasses.setAttribute('d', 'M12,8C9.3,8,7,8.8,5.5,9.3C4,9.8,3,10.5,2.5,11C2,11.5,2,12,2,12.5C2,13,2.5,13.5,3,13.5C3.5,13.5,4,13,4.5,12.5C5,12,6,11.5,7.5,11C9,10.5,10.5,10,12,10C13.5,10,15,10.5,16.5,11C18,11.5,19,12,19.5,12.5C20,13,20.5,13.5,21,13.5C21.5,13.5,22,13,22,12.5C22,12,22,11.5,21.5,11C21,10.5,20,9.8,18.5,9.3C17,8.8,14.7,8,12,8Z');
      glasses.setAttribute('fill', '#00FF00');
      
      // Create eyes part
      const leftEye = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
      leftEye.setAttribute('cx', '8');
      leftEye.setAttribute('cy', '14');
      leftEye.setAttribute('r', '2');
      leftEye.setAttribute('fill', '#00FF00');
      
      const rightEye = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
      rightEye.setAttribute('cx', '16');
      rightEye.setAttribute('cy', '14');
      rightEye.setAttribute('r', '2');
      rightEye.setAttribute('fill', '#00FF00');
      
      // Add all elements to SVG
      svg.appendChild(hat);
      svg.appendChild(glasses);
      svg.appendChild(leftEye);
      svg.appendChild(rightEye);
      
      // Create logo text container
      const logoText = document.createElement('div');
      logoText.className = 'logo-text';
      
      // Add main and sub text
      const mainText = document.createElement('span');
      mainText.className = 'logo-text-main';
      mainText.textContent = 'LONE DETECTIVE';
      
      const subText = document.createElement('span');
      subText.className = 'logo-text-sub';
      subText.textContent = 'ARCH OPERATING SYSTEM';
      
      // Assemble logo
      logoText.appendChild(mainText);
      logoText.appendChild(subText);
      
      logoContainer.appendChild(svg);
      logoContainer.appendChild(logoText);
      
      // Add animation to the logo
      const animateLogo = () => {
        // Randomly blink eyes
        if (Math.random() > 0.95) {
          leftEye.setAttribute('r', '0.5');
          rightEye.setAttribute('r', '0.5');
          
          setTimeout(() => {
            leftEye.setAttribute('r', '2');
            rightEye.setAttribute('r', '2');
          }, 150);
        }
        
        // Occasionally move hat
        if (Math.random() > 0.98) {
          hat.style.transform = 'translateY(-1px)';
          
          setTimeout(() => {
            hat.style.transform = 'translateY(0)';
          }, 300);
        }
        
        requestAnimationFrame(animateLogo);
      };
      
      animateLogo();
    });

    // Remove system monitor
    document.addEventListener('DOMContentLoaded', function() {
      // Find and remove the system monitor
      const systemMonitor = document.querySelector('.system-monitor');
      if (systemMonitor) {
        systemMonitor.remove();
      }
      
      // Adjust layout after removing system monitor
      const dataPanel = document.querySelector('.data-panel');
      if (dataPanel) {
        dataPanel.style.height = '100%';
      }
      
      // Resize the side panel content to fill available space
      const sideContent = document.querySelector('.side-panel-content');
      if (sideContent) {
        sideContent.style.height = '100%';
        sideContent.style.display = 'flex';
        sideContent.style.flexDirection = 'column';
      }
      
      // Make data sections take up more space
      const dataSections = document.querySelectorAll('.data-section');
      dataSections.forEach(section => {
        section.style.marginBottom = '30px';
        section.style.flex = '1';
        });
      });
    
    // Enhanced terminal with more commands including snake game
    document.addEventListener('DOMContentLoaded', function() {
    // Terminal functionality
    const terminalOutput = document.getElementById('terminal-output');
    const commandInput = document.getElementById('command-input');
    
      // Command history functionality
      let commandHistory = [];
      let historyIndex = -1;
      
      // Initialize terminal with welcome message
      function initTerminal() {
        addTerminalLine("Welcome to LONE DETECTIVE ARCH OS v1.0.3");
        addTerminalLine("Type 'help' for available commands.");
        addTerminalLine("");
      }
      
      // Add a line to the terminal
      function addTerminalLine(text) {
        const line = document.createElement('div');
        line.className = 'terminal-line';
        line.innerHTML = text;
        terminalOutput.appendChild(line);
        scrollToBottom();
      }
      
      // Scroll terminal to bottom
      function scrollToBottom() {
      terminalOutput.scrollTop = terminalOutput.scrollHeight;
      }
      
      // Process commands
      function processCommand(command) {
        addTerminalLine("<span class='command-prompt'>L.D.A.O.S:~$</span> <span class='command-text'>" + command + "</span>");
        
        // Add to history
        if (command.trim() !== '') {
          commandHistory.unshift(command);
          historyIndex = -1;
        }
        
        // Process command
        const cmd = command.trim().toLowerCase();
        
        if (cmd === '') {
          // Empty command, do nothing
        } else if (cmd === 'help') {
          addTerminalLine("Available commands:");
          addTerminalLine("  <span style='color:#00FF00;'>help</span>       - Show this help message");
          addTerminalLine("  <span style='color:#00FF00;'>clear</span>      - Clear the terminal");
          addTerminalLine("  <span style='color:#00FF00;'>neofetch</span>   - Display system information");
          addTerminalLine("  <span style='color:#00FF00;'>date</span>       - Show current date and time");
          addTerminalLine("  <span style='color:#00FF00;'>ls</span>         - List files in current directory");
          addTerminalLine("  <span style='color:#00FF00;'>whoami</span>     - Display current user");
          addTerminalLine("  <span style='color:#00FF00;'>info</span>       - Display information about us");
          addTerminalLine("  <span style='color:#00FF00;'>snake</span>      - Play snake game");
          addTerminalLine("  <span style='color:#00FF00;'>matrix</span>     - Display matrix effect");
          addTerminalLine("  <span style='color:#00FF00;'>scan</span>       - Scan for threats");
          addTerminalLine("  <span style='color:#00FF00;'>exit</span>       - Exit terminal (minimizes window)");
        } else if (cmd === 'clear') {
      terminalOutput.innerHTML = '';
        } else if (cmd === 'neofetch') {
          showNeofetch();
        } else if (cmd === 'date') {
          const now = new Date();
          addTerminalLine(now.toString());
        } else if (cmd === 'ls') {
          addTerminalLine("<span style='color:#4E9A06'>Documents</span>  <span style='color:#4E9A06'>Downloads</span>  <span style='color:#4E9A06'>Pictures</span>");
          addTerminalLine("<span style='color:#3465A4'>cases.txt</span>  <span style='color:#3465A4'>evidence.dat</span>  <span style='color:#3465A4'>notes.md</span>  <span style='color:#3465A4'>report.pdf</span>");
        } else if (cmd === 'whoami') {
          addTerminalLine("lone_detective");
        } else if (cmd === 'info') {
          showInfo();
        } else if (cmd === 'snake') {
          launchSnakeGame();
        } else if (cmd === 'matrix') {
          showMatrixEffect();
        } else if (cmd === 'scan') {
          performScan();
        } else if (cmd === 'exit') {
          addTerminalLine("Closing terminal session...");
          // Minimize terminal window logic
          const terminalOverlay = document.querySelector('.terminal-overlay');
          if (terminalOverlay) {
            terminalOverlay.style.opacity = '0';
            setTimeout(() => {
              terminalOverlay.style.display = 'none';
            }, 500);
          }
        } else {
          addTerminalLine("<span style='color:#FF5555'>Command not found: " + command + "</span>");
        }
      }
      
      // Show neofetch-style system information
      function showNeofetch() {
        // ASCII art logo
      const asciiLogo = [
          "                 .                    ",
          "                .:.                   ",
          "               .:::.                  ",
          "              .:::::.                 ",
          "          ***.:::::::.***            ",
          "     *******.:::::::::.*******       ",
          "   ********.:::::::::::.********     ",
          "  ********.:::::::::::::.********    ",
          " ********.:::::::'***:::.********    ",
          " ******.:::::'*********::.******     ",
          " ****.::::'*************::.**        ",
          "   .:::'*****************::.         ",
          "  .:'*********************.          ",
          " .***********************:.          ",
          " ***********************:.           ",
          " ***********************:.           ",
          " ***********************:.           ",
          " ***********************:.           ",
          " ***********************:.           ",
          " ***********************:.           ",
          " ***********************:.           ",
          " ***********************:.           ",
          " ***********************:.           ",
          " ***********************:.           "
        ];
        
        // System information
      const systemInfo = [
          "<span style='color:#00FF00;'>OS:</span> LONE DETECTIVE ARCH OS v1.0.3",
          "<span style='color:#00FF00;'>Host:</span> Secure Terminal X-7",
          "<span style='color:#00FF00;'>Kernel:</span> 5.15.0-ld-secure",
          "<span style='color:#00FF00;'>Uptime:</span> 3 days, 7 hours, 14 minutes",
          "<span style='color:#00FF00;'>Packages:</span> 1,337",
          "<span style='color:#00FF00;'>Shell:</span> ld-bash 5.1.16",
          "<span style='color:#00FF00;'>Resolution:</span> " + window.innerWidth + "x" + window.innerHeight,
          "<span style='color:#00FF00;'>DE:</span> LDAOS Desktop",
          "<span style='color:#00FF00;'>WM:</span> LDWM",
          "<span style='color:#00FF00;'>Terminal:</span> ld-term",
          "<span style='color:#00FF00;'>CPU:</span> Quantum Core i9 @ 5.2GHz",
          "<span style='color:#00FF00;'>GPU:</span> CyberForce RTX 4090",
          "<span style='color:#00FF00;'>Memory:</span> 32GB / 64GB"
        ];
        
        // Combine ASCII art and system info
        let neofetchOutput = "<div style='display:flex; font-family:monospace; margin-bottom:15px;'>";
        neofetchOutput += "<pre style='color:#00FF00; margin-right:20px;'>" + asciiLogo.join("\n") + "</pre>";
        neofetchOutput += "<div style='display:flex; flex-direction:column; justify-content:center;'>";
      
      // Add color blocks
        neofetchOutput += "<div style='display:flex; margin-bottom:10px;'>";
      const colors = ["#000000", "#FF0000", "#00FF00", "#FFFF00", "#0000FF", "#FF00FF", "#00FFFF", "#FFFFFF"];
        colors.forEach(color => {
          neofetchOutput += `<div style='width:20px; height:20px; background-color:${color}; margin-right:2px;'></div>`;
        });
        neofetchOutput += "</div>";
        
        // Add system info
        systemInfo.forEach(info => {
          neofetchOutput += "<div>" + info + "</div>";
        });
        
        neofetchOutput += "</div></div>";
        
        addTerminalLine(neofetchOutput);
      }
      
      // Show info about us
      function showInfo() {
        addTerminalLine("<div style='border: 1px solid #00FF00; padding: 10px; margin: 10px 0;'>");
        addTerminalLine("<span style='color:#00FF00; font-size: 1.2em; font-weight: bold;'>ABOUT LONE DETECTIVE</span>");
        addTerminalLine("<br>");
        addTerminalLine("Lone Detective is a Mechatronics Engineering student & co-founder of Futureforge Studios Pvt. Ltd.");
        addTerminalLine("<br>");
        addTerminalLine("Passionate about merging ideas, collaboration, and cross-disciplinary learning. Strong foundation in engineering, statistics, and machine learning. Experienced in web development & server management.");
        addTerminalLine("<br>");
        addTerminalLine("<span style='color:#00FF00;'>Mission:</span> To create innovative solutions at the intersection of hardware and software.");
        addTerminalLine("<span style='color:#00FF00;'>Vision:</span> Building a future where technology enhances human potential.");
        addTerminalLine("<br>");
        addTerminalLine("<span style='color:#00FF00;'>Contact:</span> <a href='mailto:me@lonedetective.moe' style='color:#00AAFF;'>me@lonedetective.moe</a>");
        addTerminalLine("</div>");
      }
      
      // Launch snake game in a movable window
      function launchSnakeGame() {
        // Create game window
        const gameWindow = document.createElement('div');
        gameWindow.className = 'game-window';
        gameWindow.innerHTML = `
          <div class="game-header">
            <div class="game-title">SNAKE GAME</div>
            <div class="game-controls">
              <button class="game-minimize">_</button>
              <button class="game-close">×</button>
            </div>
          </div>
          <div class="game-content">
            <canvas id="snake-canvas" width="300" height="300"></canvas>
            <div class="game-score">SCORE: <span id="snake-score">0</span></div>
            <div class="game-instructions">Use arrow keys or swipe to move. Space to pause.</div>
          </div>
        `;
        
        document.body.appendChild(gameWindow);
        
        // Make window draggable
        makeElementDraggable(gameWindow);
        
        // Initialize game
        const canvas = document.getElementById('snake-canvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('snake-score');
        
        // Game variables
        const gridSize = 15;
        const tileCount = 20;
        let snake = [
          { x: 10, y: 10 }
        ];
        let food = {
          x: Math.floor(Math.random() * tileCount),
          y: Math.floor(Math.random() * tileCount)
        };
        let dx = 0;
        let dy = 0;
        let score = 0;
        let gameOver = false;
        let gamePaused = false;
        
        // Touch variables
        let touchStartX = 0;
        let touchStartY = 0;
        
        // Game loop
        function gameLoop() {
          if (gameOver || gamePaused) return;
          
          // Move snake
          const head = { x: snake[0].x + dx, y: snake[0].y + dy };
          
          // Check for wall collision
          if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
            gameOver = true;
            return;
          }
          
          // Check for self collision
          for (let i = 0; i < snake.length; i++) {
            if (head.x === snake[i].x && head.y === snake[i].y) {
              gameOver = true;
              return;
            }
          }
          
          // Add new head
          snake.unshift(head);
          
          // Check for food collision
          if (head.x === food.x && head.y === food.y) {
            // Increase score
            score += 10;
            scoreElement.textContent = score;
            
            // Generate new food
            food = {
              x: Math.floor(Math.random() * tileCount),
              y: Math.floor(Math.random() * tileCount)
            };
          } else {
            // Remove tail
            snake.pop();
          }
          
          // Clear canvas
          ctx.fillStyle = '#111';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          
          // Draw food
          ctx.fillStyle = '#FF0000';
          ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);
          
          // Draw snake
          ctx.fillStyle = '#00FF00';
          for (let i = 0; i < snake.length; i++) {
            ctx.fillRect(snake[i].x * gridSize, snake[i].y * gridSize, gridSize, gridSize);
            
            // Add gradient effect to snake
            if (i === 0) {
              // Head is brighter
              ctx.fillStyle = '#00FF00';
            } else {
              // Body gets darker toward tail
              const alpha = 1 - (i / snake.length) * 0.6;
              ctx.fillStyle = `rgba(0, 255, 0, ${alpha})`;
            }
          }
          
          // Draw grid
          ctx.strokeStyle = '#333';
          ctx.lineWidth = 0.5;
          for (let i = 0; i < tileCount; i++) {
            ctx.beginPath();
            ctx.moveTo(i * gridSize, 0);
            ctx.lineTo(i * gridSize, canvas.height);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(0, i * gridSize);
            ctx.lineTo(canvas.width, i * gridSize);
            ctx.stroke();
          }
          
          // Draw game over
          if (gameOver) {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.font = '20px "Fira Code"';
            ctx.fillStyle = '#FF0000';
            ctx.textAlign = 'center';
            ctx.fillText('GAME OVER', canvas.width / 2, canvas.height / 2 - 10);
            
            ctx.font = '14px "Fira Code"';
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText(`SCORE: ${score}`, canvas.width / 2, canvas.height / 2 + 20);
            
            ctx.font = '12px "Fira Code"';
            ctx.fillText('Press ENTER to restart', canvas.width / 2, canvas.height / 2 + 50);
          }
          
          // Draw pause screen
          if (gamePaused) {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.font = '20px "Fira Code"';
            ctx.fillStyle = '#00FF00';
            ctx.textAlign = 'center';
            ctx.fillText('PAUSED', canvas.width / 2, canvas.height / 2);
            
            ctx.font = '12px "Fira Code"';
            ctx.fillText('Press SPACE to resume', canvas.width / 2, canvas.height / 2 + 30);
          }
        }
        
        // Keyboard controls
        document.addEventListener('keydown', function(e) {
          // Prevent arrow keys from scrolling the page
          if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ' ', 'Enter'].includes(e.key)) {
            e.preventDefault();
          }
          
          if (gameOver) {
            if (e.key === 'Enter') {
              // Restart game
              snake = [{ x: 10, y: 10 }];
              dx = 0;
              dy = 0;
              score = 0;
              scoreElement.textContent = score;
              food = {
                x: Math.floor(Math.random() * tileCount),
                y: Math.floor(Math.random() * tileCount)
              };
              gameOver = false;
            }
            return;
          }
          
          if (e.key === ' ') {
            // Toggle pause
            gamePaused = !gamePaused;
            return;
          }
          
          if (gamePaused) return;
          
          // Change direction
          if (e.key === 'ArrowUp' && dy === 0) {
            dx = 0;
            dy = -1;
          } else if (e.key === 'ArrowDown' && dy === 0) {
            dx = 0;
            dy = 1;
          } else if (e.key === 'ArrowLeft' && dx === 0) {
            dx = -1;
            dy = 0;
          } else if (e.key === 'ArrowRight' && dx === 0) {
            dx = 1;
            dy = 0;
          }
        });
        
        // Touch controls
        canvas.addEventListener('touchstart', function(e) {
          touchStartX = e.touches[0].clientX;
          touchStartY = e.touches[0].clientY;
          e.preventDefault();
        }, false);
        
        canvas.addEventListener('touchmove', function(e) {
          e.preventDefault(); // Prevent scrolling
        }, false);
        
        canvas.addEventListener('touchend', function(e) {
          if (gameOver) {
            // Tap to restart
            snake = [{ x: 10, y: 10 }];
            dx = 0;
            dy = 0;
            score = 0;
            scoreElement.textContent = score;
            food = {
              x: Math.floor(Math.random() * tileCount),
              y: Math.floor(Math.random() * tileCount)
            };
            gameOver = false;
            return;
          }
          
          if (gamePaused) {
            gamePaused = false;
            return;
          }
          
          const touchEndX = e.changedTouches[0].clientX;
          const touchEndY = e.changedTouches[0].clientY;
          
          const diffX = touchStartX - touchEndX;
          const diffY = touchStartY - touchEndY;
          
          // Determine swipe direction
          if (Math.abs(diffX) > Math.abs(diffY)) {
            // Horizontal swipe
            if (diffX > 0 && dx === 0) {
              // Swipe left
              dx = -1;
              dy = 0;
            } else if (diffX < 0 && dx === 0) {
              // Swipe right
              dx = 1;
              dy = 0;
            }
          } else {
            // Vertical swipe
            if (diffY > 0 && dy === 0) {
              // Swipe up
              dx = 0;
              dy = -1;
            } else if (diffY < 0 && dy === 0) {
              // Swipe down
              dx = 0;
              dy = 1;
            }
          }
          
          e.preventDefault();
        }, false);
        
        // Add touch control buttons for mobile
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
          const touchControls = document.createElement('div');
          touchControls.className = 'touch-controls';
          touchControls.innerHTML = `
            <button class="touch-btn up">▲</button>
            <div class="touch-btn-row">
              <button class="touch-btn left">◀</button>
              <button class="touch-btn right">▶</button>
            </div>
            <button class="touch-btn down">▼</button>
          `;
          gameWindow.querySelector('.game-content').appendChild(touchControls);
          
          // Add event listeners to buttons
          const upBtn = touchControls.querySelector('.up');
          const downBtn = touchControls.querySelector('.down');
          const leftBtn = touchControls.querySelector('.left');
          const rightBtn = touchControls.querySelector('.right');
          
          upBtn.addEventListener('click', function() {
            if (dy === 0 && !gameOver && !gamePaused) {
              dx = 0;
              dy = -1;
            }
          });
          
          downBtn.addEventListener('click', function() {
            if (dy === 0 && !gameOver && !gamePaused) {
              dx = 0;
              dy = 1;
            }
          });
          
          leftBtn.addEventListener('click', function() {
            if (dx === 0 && !gameOver && !gamePaused) {
              dx = -1;
              dy = 0;
            }
          });
          
          rightBtn.addEventListener('click', function() {
            if (dx === 0 && !gameOver && !gamePaused) {
              dx = 1;
              dy = 0;
            }
          });
        }
        
        // Start game loop
        const gameInterval = setInterval(gameLoop, 150);
        
        // Make element draggable
        function makeElementDraggable(element) {
          const header = element.querySelector('.game-header');
          let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
          
          header.onmousedown = dragMouseDown;
          header.ontouchstart = dragTouchStart;
          
          function dragMouseDown(e) {
            e.preventDefault();
            // Get mouse position
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
          }
          
          function dragTouchStart(e) {
            e.preventDefault();
            // Get touch position
            pos3 = e.touches[0].clientX;
            pos4 = e.touches[0].clientY;
            document.ontouchend = closeDragElement;
            document.ontouchmove = elementTouchDrag;
          }
          
          function elementDrag(e) {
            e.preventDefault();
            // Calculate new position
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            // Set element's new position
            element.style.top = (element.offsetTop - pos2) + "px";
            element.style.left = (element.offsetLeft - pos1) + "px";
          }
          
          function elementTouchDrag(e) {
            e.preventDefault();
            // Calculate new position
            pos1 = pos3 - e.touches[0].clientX;
            pos2 = pos4 - e.touches[0].clientY;
            pos3 = e.touches[0].clientX;
            pos4 = e.touches[0].clientY;
            // Set element's new position
            element.style.top = (element.offsetTop - pos2) + "px";
            element.style.left = (element.offsetLeft - pos1) + "px";
          }
          
          function closeDragElement() {
            // Stop moving when mouse/touch is released
            document.onmouseup = null;
            document.onmousemove = null;
            document.ontouchend = null;
            document.ontouchmove = null;
          }
        }
      }
      
      // Show matrix effect
      function showMatrixEffect() {
        addTerminalLine("Initializing Matrix effect...");
        
        // Create matrix canvas
        const matrixCanvas = document.createElement('canvas');
        matrixCanvas.className = 'matrix-canvas';
        document.body.appendChild(matrixCanvas);
        
        // Set canvas size
        matrixCanvas.width = window.innerWidth;
        matrixCanvas.height = window.innerHeight;
        
        const ctx = matrixCanvas.getContext('2d');
        
        // Matrix characters
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$+-*/=%\"'#&_(),.;:?!\\|{}<>[]^~";
        
        // Column setup
        const fontSize = 14;
        const columns = matrixCanvas.width / fontSize;
        
        // Array to track the y position of each column
        const drops = [];
        for (let i = 0; i < columns; i++) {
          drops[i] = 1;
        }
        
        // Draw matrix
        function drawMatrix() {
          // Add semi-transparent black to create fade effect
          ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
          ctx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);
          
          // Green text
          ctx.fillStyle = "#00FF00";
          ctx.font = fontSize + "px monospace";
          
          // Draw characters
          for (let i = 0; i < drops.length; i++) {
            // Random character
            const char = chars[Math.floor(Math.random() * chars.length)];
            
            // Draw character
            ctx.fillText(char, i * fontSize, drops[i] * fontSize);
            
            // Move to next position or reset to top
            if (drops[i] * fontSize > matrixCanvas.height && Math.random() > 0.975) {
              drops[i] = 0;
            }
            
            drops[i]++;
          }
        }
        
        // Animation loop
        const matrixInterval = setInterval(drawMatrix, 33);
        
        // Remove matrix after 10 seconds
        setTimeout(function() {
          clearInterval(matrixInterval);
          matrixCanvas.remove();
        }, 10000);
      }
      
      // Perform a fake system scan
      function performScan() {
        addTerminalLine("<span style='color:#00FF00;'>Initiating system scan...</span>");
        
        const scanSteps = [
          { text: "Scanning system files...", delay: 1000 },
          { text: "Checking for malware signatures...", delay: 1500 },
          { text: "Analyzing network connections...", delay: 2000 },
          { text: "Inspecting memory usage...", delay: 1200 },
          { text: "Verifying file integrity...", delay: 1800 },
          { text: "Checking for rootkits...", delay: 2200 },
          { text: "Scanning registry entries...", delay: 1600 },
          { text: "Analyzing startup programs...", delay: 1400 },
          { text: "Checking for suspicious processes...", delay: 1900 },
          { text: "Finalizing scan results...", delay: 1700 }
        ];
        
        let stepIndex = 0;
        
        function runNextStep() {
          if (stepIndex < scanSteps.length) {
            const step = scanSteps[stepIndex];
            addTerminalLine(step.text);
            stepIndex++;
            setTimeout(runNextStep, step.delay);
      } else {
            // Scan complete
            addTerminalLine("<span style='color:#00FF00;'>Scan complete!</span>");
            addTerminalLine("<span style='color:#00FF00;'>No threats detected. System is secure.</span>");
            
            // Show fake scan results
            addTerminalLine("<div style='border: 1px solid #00FF00; padding: 10px; margin: 10px 0;'>");
            addTerminalLine("<span style='color:#00FF00;'>SCAN SUMMARY:</span>");
            addTerminalLine("Files scanned: 145,782");
            addTerminalLine("Memory analyzed: 8.2 GB");
            addTerminalLine("Network connections checked: 24");
            addTerminalLine("Scan duration: 15.7 seconds");
            addTerminalLine("</div>");
          }
        }
        
        runNextStep();
      }
      
      // Handle command input
      commandInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          const command = commandInput.value;
          processCommand(command);
          commandInput.value = '';
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          if (historyIndex < commandHistory.length - 1) {
            historyIndex++;
            commandInput.value = commandHistory[historyIndex];
          }
        } else if (e.key === 'ArrowDown') {
          e.preventDefault();
          if (historyIndex > 0) {
            historyIndex--;
            commandInput.value = commandHistory[historyIndex];
          } else if (historyIndex === 0) {
            historyIndex = -1;
            commandInput.value = '';
          }
        } else if (e.key === 'Tab') {
          e.preventDefault();
          // Simple tab completion for commands
          const partialCmd = commandInput.value.toLowerCase();
          const commands = ['help', 'clear', 'neofetch', 'date', 'ls', 'whoami', 'info', 'snake', 'matrix', 'scan', 'exit'];
          
          for (const cmd of commands) {
            if (cmd.startsWith(partialCmd)) {
              commandInput.value = cmd;
              break;
            }
          }
        }
      });
      
      // Initialize terminal
      initTerminal();
      
      // Focus input when clicking on terminal
      document.querySelector('.terminal').addEventListener('click', function() {
        commandInput.focus();
      });
      
      // Expose processCommand to global scope for external access
      window.processCommand = processCommand;
    });

    // Create and add favicon dynamically
    document.addEventListener('DOMContentLoaded', function() {
      // Create a canvas to draw the favicon
      const canvas = document.createElement('canvas');
      canvas.width = 64;
      canvas.height = 64;
      const ctx = canvas.getContext('2d');
      
      // Draw background
      ctx.fillStyle = '#000000';
      ctx.fillRect(0, 0, 64, 64);
      
      // Draw hat
      ctx.fillStyle = '#00FF00';
      ctx.beginPath();
      ctx.moveTo(32, 8);  // Top center
      ctx.lineTo(16, 20); // Left edge
      ctx.lineTo(12, 40); // Bottom left
      ctx.lineTo(52, 40); // Bottom right
      ctx.lineTo(48, 20); // Right edge
      ctx.closePath();
      ctx.fill();
      
      // Draw glasses
      ctx.beginPath();
      ctx.moveTo(16, 32);
      ctx.lineTo(48, 32);
      ctx.lineWidth = 3;
      ctx.strokeStyle = '#00FF00';
      ctx.stroke();
      
      // Draw eyes
      ctx.fillStyle = '#00FF00';
      ctx.beginPath();
      ctx.arc(24, 32, 4, 0, Math.PI * 2);
      ctx.fill();
      
      ctx.beginPath();
      ctx.arc(40, 32, 4, 0, Math.PI * 2);
      ctx.fill();
      
      // Convert canvas to favicon URL
      const faviconUrl = canvas.toDataURL('image/png');
      
      // Create link element for favicon
      const link = document.createElement('link');
      link.rel = 'icon';
      link.type = 'image/png';
      link.href = faviconUrl;
      
      // Add to document head
      document.head.appendChild(link);
    });

    // Update title and add mobile support
    document.addEventListener('DOMContentLoaded', function() {
      // Change document title
      document.title = "Lone Detective Portal";
      
      // Add viewport meta tag with proper settings if not already present
      let viewportMeta = document.querySelector('meta[name="viewport"]');
      if (!viewportMeta) {
        viewportMeta = document.createElement('meta');
        viewportMeta.name = 'viewport';
        document.head.appendChild(viewportMeta);
      }
      viewportMeta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no';
      
      // Add mobile detection
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768;
      
      // Add mobile class to body if on mobile device
      if (isMobile) {
        document.body.classList.add('mobile');
        
        // Adjust terminal for mobile
        const terminal = document.querySelector('.terminal-overlay');
        if (terminal) {
          terminal.style.fontSize = '14px';
        }
        
        // Make command input more touch-friendly
        const commandInput = document.getElementById('command-input');
        if (commandInput) {
          commandInput.style.fontSize = '16px'; // Prevent zoom on iOS
          commandInput.style.height = '40px';
        }
        
        // Adjust radar size for mobile
        const crossContainer = document.querySelector('.cross-container');
        if (crossContainer) {
          crossContainer.style.width = '250px';
          crossContainer.style.height = '250px';
        }
        
        // Show mobile navigation
        const mobileNav = document.querySelector('.mobile-nav');
        if (mobileNav) {
          mobileNav.style.display = 'block';
        }
      }
      
      // Handle orientation changes
      window.addEventListener('orientationchange', function() {
        setTimeout(function() {
          // Recalculate sizes based on new orientation
          const newWidth = window.innerWidth;
          const newHeight = window.innerHeight;
          
          // Update any canvas elements
          const canvases = document.querySelectorAll('canvas');
          canvases.forEach(canvas => {
            canvas.width = newWidth;
            canvas.height = newHeight;
          });
          
          // Adjust terminal size
          const terminal = document.querySelector('.terminal');
          if (terminal) {
            terminal.style.height = (newHeight * 0.6) + 'px';
          }
          
          // Reposition elements
          if (isMobile) {
            // Portrait mode
            if (newWidth < newHeight) {
              document.body.classList.add('portrait');
              document.body.classList.remove('landscape');
            } 
            // Landscape mode
            else {
              document.body.classList.add('landscape');
              document.body.classList.remove('portrait');
            }
          }
        }, 300); // Small delay to ensure dimensions are updated
      });
      
      // Handle window resize for desktop
      window.addEventListener('resize', function() {
        if (!isMobile) {
          // Update layout based on new window size
          const newWidth = window.innerWidth;
          const newHeight = window.innerHeight;
          
          // Adjust main content area
          const main = document.querySelector('main');
          if (main) {
            main.style.height = (newHeight - 100) + 'px';
          }
          
          // Adjust side panel
          const aside = document.querySelector('aside');
          if (aside && newWidth < 1200) {
            aside.style.width = '300px';
          } else if (aside) {
            aside.style.width = '400px';
          }
        }
      });
      
      // Add touch support for radar
      const radar = document.querySelector('.cross-container');
      if (radar) {
        // Add touch event listeners
        radar.addEventListener('touchstart', function(e) {
          e.preventDefault(); // Prevent default touch behavior
          this.classList.add('active');
        });
        
        radar.addEventListener('touchend', function() {
          this.classList.remove('active');
          // Trigger click event to maintain functionality
          this.click();
        });
      }
      
      // Add swipe detection for mobile
      let touchStartX = 0;
      let touchStartY = 0;
      
      document.addEventListener('touchstart', function(e) {
        touchStartX = e.changedTouches[0].screenX;
        touchStartY = e.changedTouches[0].screenY;
      }, false);
      
      document.addEventListener('touchend', function(e) {
        const touchEndX = e.changedTouches[0].screenX;
        const touchEndY = e.changedTouches[0].screenY;
        
        const diffX = touchStartX - touchEndX;
        const diffY = touchStartY - touchEndY;
        
        // Detect horizontal swipe
        if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
          // Swipe left
          if (diffX > 0) {
            // Show terminal on swipe left
            const terminal = document.querySelector('.terminal-overlay');
            if (terminal) {
              terminal.style.display = 'block';
              terminal.style.opacity = '1';
              document.getElementById('command-input').focus();
            }
          } 
          // Swipe right
          else {
            // Hide terminal on swipe right
            const terminal = document.querySelector('.terminal-overlay');
            if (terminal && terminal.style.opacity === '1') {
              terminal.style.opacity = '0';
              setTimeout(() => {
                terminal.style.display = 'none';
              }, 300);
            }
          }
        }
      }, false);
    });

    // Add snake game command to terminal
    document.addEventListener('DOMContentLoaded', function() {
      // Check if processCommand function exists in global scope
      if (typeof window.processCommand === 'function') {
        // Store the original processCommand function
        const originalProcessCommand = window.processCommand;
        
        // Override with enhanced version that includes snake game
        window.processCommand = function(command) {
          // Call the original function first
          originalProcessCommand(command);
          
          // Check if command is 'snake'
          const cmd = command.trim().toLowerCase();
          if (cmd === 'snake') {
            // Launch snake game
            launchSnakeGame();
          }
        };
      }
      
      // Snake game implementation
      window.launchSnakeGame = function() {
        // Create game window
        const gameWindow = document.createElement('div');
        gameWindow.className = 'game-window';
        gameWindow.innerHTML = `
          <div class="game-header">
            <div class="game-title">SNAKE GAME</div>
            <div class="game-controls">
              <button class="game-minimize">_</button>
              <button class="game-close">×</button>
            </div>
          </div>
          <div class="game-content">
            <canvas id="snake-canvas" width="300" height="300"></canvas>
            <div class="game-score">SCORE: <span id="snake-score">0</span></div>
            <div class="game-instructions">Use arrow keys or swipe to move. Space to pause.</div>
          </div>
        `;
        
        document.body.appendChild(gameWindow);
        
        // Make window draggable
        makeElementDraggable(gameWindow);
        
        // Set up close and minimize buttons
        const closeButton = gameWindow.querySelector('.game-close');
        closeButton.addEventListener('click', function() {
          gameWindow.remove();
          // Stop game loop
          clearInterval(gameInterval);
        });
        
        const minimizeButton = gameWindow.querySelector('.game-minimize');
        minimizeButton.addEventListener('click', function() {
          const gameContent = gameWindow.querySelector('.game-content');
          if (gameContent.style.display === 'none') {
            gameContent.style.display = 'block';
            minimizeButton.textContent = '_';
          } else {
            gameContent.style.display = 'none';
            minimizeButton.textContent = '□';
          }
        });
        
        // Initialize game
        const canvas = document.getElementById('snake-canvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('snake-score');
        
        // Game variables
        const gridSize = 15;
        const tileCount = 20;
        let snake = [
          { x: 10, y: 10 }
        ];
        let food = {
          x: Math.floor(Math.random() * tileCount),
          y: Math.floor(Math.random() * tileCount)
        };
        let dx = 0;
        let dy = 0;
        let score = 0;
        let gameOver = false;
        let gamePaused = false;
        
        // Touch variables
        let touchStartX = 0;
        let touchStartY = 0;
        
        // Game loop
        function gameLoop() {
          if (gameOver || gamePaused) return;
          
          // Move snake
          const head = { x: snake[0].x + dx, y: snake[0].y + dy };
          
          // Check for wall collision
          if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
            gameOver = true;
            return;
          }
          
          // Check for self collision
          for (let i = 0; i < snake.length; i++) {
            if (head.x === snake[i].x && head.y === snake[i].y) {
              gameOver = true;
              return;
            }
          }
          
          // Add new head
          snake.unshift(head);
          
          // Check for food collision
          if (head.x === food.x && head.y === food.y) {
            // Increase score
            score += 10;
            scoreElement.textContent = score;
            
            // Generate new food
            food = {
              x: Math.floor(Math.random() * tileCount),
              y: Math.floor(Math.random() * tileCount)
            };
          } else {
            // Remove tail
            snake.pop();
          }
          
          // Clear canvas
          ctx.fillStyle = '#111';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          
          // Draw food
          ctx.fillStyle = '#FF0000';
          ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);
          
          // Draw snake
          ctx.fillStyle = '#00FF00';
          for (let i = 0; i < snake.length; i++) {
            ctx.fillRect(snake[i].x * gridSize, snake[i].y * gridSize, gridSize, gridSize);
            
            // Add gradient effect to snake
            if (i === 0) {
              // Head is brighter
              ctx.fillStyle = '#00FF00';
            } else {
              // Body gets darker toward tail
              const alpha = 1 - (i / snake.length) * 0.6;
              ctx.fillStyle = `rgba(0, 255, 0, ${alpha})`;
            }
          }
          
          // Draw grid
          ctx.strokeStyle = '#333';
          ctx.lineWidth = 0.5;
          for (let i = 0; i < tileCount; i++) {
            ctx.beginPath();
            ctx.moveTo(i * gridSize, 0);
            ctx.lineTo(i * gridSize, canvas.height);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(0, i * gridSize);
            ctx.lineTo(canvas.width, i * gridSize);
            ctx.stroke();
          }
          
          // Draw game over
          if (gameOver) {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.font = '20px "Fira Code"';
            ctx.fillStyle = '#FF0000';
            ctx.textAlign = 'center';
            ctx.fillText('GAME OVER', canvas.width / 2, canvas.height / 2 - 10);
            
            ctx.font = '14px "Fira Code"';
            ctx.fillStyle = '#FFFFFF';
            ctx.fillText(`SCORE: ${score}`, canvas.width / 2, canvas.height / 2 + 20);
            
            ctx.font = '12px "Fira Code"';
            ctx.fillText('Press ENTER to restart', canvas.width / 2, canvas.height / 2 + 50);
          }
          
          // Draw pause screen
          if (gamePaused) {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.font = '20px "Fira Code"';
            ctx.fillStyle = '#00FF00';
            ctx.textAlign = 'center';
            ctx.fillText('PAUSED', canvas.width / 2, canvas.height / 2);
            
            ctx.font = '12px "Fira Code"';
            ctx.fillText('Press SPACE to resume', canvas.width / 2, canvas.height / 2 + 30);
          }
        }
        
        // Keyboard controls
        function handleKeyDown(e) {
          // Prevent arrow keys from scrolling the page
          if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', ' ', 'Enter'].includes(e.key)) {
            e.preventDefault();
          }
          
          if (gameOver && e.key === 'Enter') {
            // Restart game
            snake = [{ x: 10, y: 10 }];
            dx = 0;
            dy = 0;
            score = 0;
            scoreElement.textContent = score;
            food = {
              x: Math.floor(Math.random() * tileCount),
              y: Math.floor(Math.random() * tileCount)
            };
            gameOver = false;
          } else if (e.key === ' ') {
            // Toggle pause
            gamePaused = !gamePaused;
          } else if (e.key === 'ArrowUp' && dy === 0) {
            dx = 0;
            dy = -1;
          } else if (e.key === 'ArrowDown' && dy === 0) {
            dx = 0;
            dy = 1;
          } else if (e.key === 'ArrowLeft' && dx === 0) {
            dx = -1;
            dy = 0;
          } else if (e.key === 'ArrowRight' && dx === 0) {
            dx = 1;
            dy = 0;
          }
        }
        
        document.addEventListener('keydown', handleKeyDown);
        
        // Touch controls
        canvas.addEventListener('touchstart', function(e) {
          touchStartX = e.touches[0].clientX;
          touchStartY = e.touches[0].clientY;
          e.preventDefault();
        }, false);
        
        canvas.addEventListener('touchmove', function(e) {
          e.preventDefault(); // Prevent scrolling
        }, false);
        
        canvas.addEventListener('touchend', function(e) {
          if (gameOver) {
            // Tap to restart
            snake = [{ x: 10, y: 10 }];
            dx = 0;
            dy = 0;
            score = 0;
            scoreElement.textContent = score;
            food = {
              x: Math.floor(Math.random() * tileCount),
              y: Math.floor(Math.random() * tileCount)
            };
            gameOver = false;
            return;
          }
          
          if (gamePaused) {
            gamePaused = false;
            return;
          }
          
          const touchEndX = e.changedTouches[0].clientX;
          const touchEndY = e.changedTouches[0].clientY;
          
          const diffX = touchStartX - touchEndX;
          const diffY = touchStartY - touchEndY;
          
          // Determine swipe direction
          if (Math.abs(diffX) > Math.abs(diffY)) {
            // Horizontal swipe
            if (diffX > 0 && dx === 0) {
              // Swipe left
              dx = -1;
              dy = 0;
            } else if (diffX < 0 && dx === 0) {
              // Swipe right
              dx = 1;
              dy = 0;
            }
          } else {
            // Vertical swipe
            if (diffY > 0 && dy === 0) {
              // Swipe up
              dx = 0;
              dy = -1;
            } else if (diffY < 0 && dy === 0) {
              // Swipe down
              dx = 0;
              dy = 1;
            }
          }
          
          e.preventDefault();
        }, false);
        
        // Add touch control buttons for mobile
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
          const touchControls = document.createElement('div');
          touchControls.className = 'touch-controls';
          touchControls.innerHTML = `
            <button class="touch-btn up">▲</button>
            <div class="touch-btn-row">
              <button class="touch-btn left">◀</button>
              <button class="touch-btn right">▶</button>
            </div>
            <button class="touch-btn down">▼</button>
          `;
          gameWindow.querySelector('.game-content').appendChild(touchControls);
          
          // Add event listeners to buttons
          const upBtn = touchControls.querySelector('.up');
          const downBtn = touchControls.querySelector('.down');
          const leftBtn = touchControls.querySelector('.left');
          const rightBtn = touchControls.querySelector('.right');
          
          upBtn.addEventListener('click', function() {
            if (dy === 0 && !gameOver && !gamePaused) {
              dx = 0;
              dy = -1;
            }
          });
          
          downBtn.addEventListener('click', function() {
            if (dy === 0 && !gameOver && !gamePaused) {
              dx = 0;
              dy = 1;
            }
          });
          
          leftBtn.addEventListener('click', function() {
            if (dx === 0 && !gameOver && !gamePaused) {
              dx = -1;
              dy = 0;
            }
          });
          
          rightBtn.addEventListener('click', function() {
            if (dx === 0 && !gameOver && !gamePaused) {
              dx = 1;
              dy = 0;
            }
          });
        }
        
        // Start game loop
        const gameInterval = setInterval(gameLoop, 150);
        
        // Clean up event listener when game is closed
        closeButton.addEventListener('click', function() {
          document.removeEventListener('keydown', handleKeyDown);
        });
        
        // Make element draggable
        function makeElementDraggable(element) {
          const header = element.querySelector('.game-header');
          let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
          
          header.onmousedown = dragMouseDown;
          header.ontouchstart = dragTouchStart;
          
          function dragMouseDown(e) {
            e.preventDefault();
            // Get mouse position
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
          }
          
          function dragTouchStart(e) {
            e.preventDefault();
            // Get touch position
            pos3 = e.touches[0].clientX;
            pos4 = e.touches[0].clientY;
            document.ontouchend = closeDragElement;
            document.ontouchmove = elementTouchDrag;
          }
          
          function elementDrag(e) {
            e.preventDefault();
            // Calculate new position
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            // Set element's new position
            element.style.top = (element.offsetTop - pos2) + "px";
            element.style.left = (element.offsetLeft - pos1) + "px";
          }
          
          function elementTouchDrag(e) {
            e.preventDefault();
            // Calculate new position
            pos1 = pos3 - e.touches[0].clientX;
            pos2 = pos4 - e.touches[0].clientY;
            pos3 = e.touches[0].clientX;
            pos4 = e.touches[0].clientY;
            // Set element's new position
            element.style.top = (element.offsetTop - pos2) + "px";
            element.style.left = (element.offsetLeft - pos1) + "px";
          }
          
          function closeDragElement() {
            // Stop moving when mouse/touch is released
            document.onmouseup = null;
            document.onmousemove = null;
            document.ontouchend = null;
            document.ontouchmove = null;
          }
        }
      }
    });
  </script>
</body>
</html>